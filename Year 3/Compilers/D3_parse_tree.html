<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ANTLR D3.js Parse Tree Inspector</title>
    <style>
    	.node circle {
    	  fill: steelblue;
    	  stroke: steelblue;
    	  stroke-width: 2px;
    	}
    	.link {
    	  fill: none;
    	  stroke: #ccc;
    	  stroke-width: 2px;
    	}
    </style>
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script>
      var treeData = [{"name": "program","value":2,"children":[{"name": "class"},{"name": "Program"},{"name": "{"},{"name": "field_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "boolean"},]},{"name": "field_name","value":2,"children":[{"name": "s"},]},{"name": ";"},]},{"name": "field_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "boolean"},]},{"name": "field_name","value":2,"children":[{"name": "t"},]},{"name": ";"},]},{"name": "method_decl","value":2,"children":[{"name": "void"},{"name": "bar"},{"name": "("},{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "b"},{"name": ")"},{"name": "block","value":2,"children":[{"name": "{"},{"name": "var_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "o"},{"name": ";"},]},{"name": "var_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "a"},{"name": ";"},]},{"name": "statement","value":2,"children":[{"name": "location","value":2,"children":[{"name": "o"},]},{"name": "assign_op","value":2,"children":[{"name": "="},]},{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "a"},]},]},{"name": ";"},]},{"name": "statement","value":2,"children":[{"name": "return"},{"name": "expr","value":2,"children":[{"name": "literal","value":2,"children":[{"name": "bool_literal","value":2,"children":[{"name": "false"},]},]},]},{"name": ";"},]},{"name": "}"},]},]},{"name": "method_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "boolean"},]},{"name": "bar"},{"name": "("},{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "a"},{"name": ")"},{"name": "block","value":2,"children":[{"name": "{"},{"name": "var_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "r"},{"name": ";"},]},{"name": "statement","value":2,"children":[{"name": "location","value":2,"children":[{"name": "r"},]},{"name": "assign_op","value":2,"children":[{"name": "="},]},{"name": "expr","value":2,"children":[{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "a"},]},]},{"name": "*"},{"name": "expr","value":2,"children":[{"name": "literal","value":2,"children":[{"name": "int_literal","value":2,"children":[{"name": "9"},]},]},]},]},{"name": ";"},]},{"name": "statement","value":2,"children":[{"name": "location","value":2,"children":[{"name": "j"},]},{"name": "assign_op","value":2,"children":[{"name": "="},]},{"name": "expr","value":2,"children":[{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "a"},]},]},{"name": "*"},{"name": "expr","value":2,"children":[{"name": "literal","value":2,"children":[{"name": "int_literal","value":2,"children":[{"name": "2"},]},]},]},]},{"name": ";"},]},{"name": "statement","value":2,"children":[{"name": "break"},{"name": ";"},]},{"name": "}"},]},]},{"name": "method_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "test"},{"name": "("},{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "p"},{"name": ")"},{"name": "block","value":2,"children":[{"name": "{"},{"name": "statement","value":2,"children":[{"name": "if"},{"name": "("},{"name": "expr","value":2,"children":[{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "t"},]},]},{"name": "=="},{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "p"},]},]},]},{"name": ")"},{"name": "block","value":2,"children":[{"name": "{"},{"name": "}"},]},]},{"name": "statement","value":2,"children":[{"name": "if"},{"name": "("},{"name": "expr","value":2,"children":[{"name": "expr","value":2,"children":[{"name": "!"},{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "s"},]},]},]},{"name": "||"},{"name": "expr","value":2,"children":[{"name": "!"},{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "e"},]},]},]},]},{"name": ")"},{"name": "block","value":2,"children":[{"name": "{"},{"name": "statement","value":2,"children":[{"name": "for"},{"name": "x"},{"name": "="},{"name": "expr","value":2,"children":[{"name": "literal","value":2,"children":[{"name": "int_literal","value":2,"children":[{"name": "2"},]},]},]},{"name": ","},{"name": "expr","value":2,"children":[{"name": "literal","value":2,"children":[{"name": "bool_literal","value":2,"children":[{"name": "true"},]},]},]},{"name": "block","value":2,"children":[{"name": "{"},{"name": "statement","value":2,"children":[{"name": "break"},{"name": ";"},]},{"name": "}"},]},]},{"name": "}"},]},]},{"name": "}"},]},]},{"name": "method_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "main"},{"name": "("},{"name": "data_type","value":2,"children":[{"name": "int"},]},{"name": "b"},{"name": ")"},{"name": "block","value":2,"children":[{"name": "{"},{"name": "var_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "boolean"},]},{"name": "d"},{"name": ";"},]},{"name": "var_decl","value":2,"children":[{"name": "data_type","value":2,"children":[{"name": "boolean"},]},{"name": "b"},{"name": ";"},]},{"name": "statement","value":2,"children":[{"name": "location","value":2,"children":[{"name": "a"},{"name": "["},{"name": "expr","value":2,"children":[{"name": "literal","value":2,"children":[{"name": "int_literal","value":2,"children":[{"name": "1"},]},]},]},{"name": "]"},]},{"name": "assign_op","value":2,"children":[{"name": "="},]},{"name": "expr","value":2,"children":[{"name": "method_call","value":2,"children":[{"name": "method_name","value":2,"children":[{"name": "foo"},]},{"name": "("},{"name": "expr","value":2,"children":[{"name": "literal","value":2,"children":[{"name": "int_literal","value":2,"children":[{"name": "1"},]},]},]},{"name": ")"},]},]},{"name": ";"},]},{"name": "statement","value":2,"children":[{"name": "location","value":2,"children":[{"name": "b"},]},{"name": "assign_op","value":2,"children":[{"name": "="},]},{"name": "expr","value":2,"children":[{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "x"},]},]},{"name": "*"},{"name": "expr","value":2,"children":[{"name": "location","value":2,"children":[{"name": "d"},]},]},]},{"name": ";"},]},{"name": "}"},]},]},{"name": "}"},{"name": "<EOF>"},]},]
        var margin = {top: 20, right: 20, bottom: 20, left: 20}, width = 2560, height = 1200;
      var i = 0;
      var tree = d3.layout.tree().size([width, height]);
      var diagonal = d3.svg.diagonal().projection(function(d) { return [d.x, d.y]; });

      var svg = d3.select("body").append("svg")
      	.attr("width", width + margin.right + margin.left)
      	.attr("height", height + margin.top + margin.bottom)
        .append("g")
      	.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      root = treeData[0];

      update(root);

      function update(source) {
        var nodes = tree.nodes(root), links = tree.links(nodes);

        nodes.forEach(function(d) { d.y = d.depth * 50; });

        var node = svg.selectAll("g.node")
      	  .data(nodes, function(d) { return d.id || (d.id = ++i); });

        var nodeEnter = node.enter().append("g")
      	  .attr("class", "node")
      	  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

        nodeEnter.append("circle")
      	  .attr("r", function(d) { return d.value; })

        nodeEnter.append("text")
          .attr("font-family", "sans-serif")
          .attr("font-size", "12px")
          .attr("font-weight", function(d) {
      		  return d.children || d._children ? "normal" : "bold"; })
          .attr("y", function(d) {
      		  return (d.value + 8) * -1 })
      	  .attr("dy", ".2em")
      	  .attr("text-anchor", function(d) {
      		  return d.children || d._children ? "middle" : "middle"; })
      	  .text(function(d) { return d.name; })
      	  .style("fill-opacity", 1);

        var link = svg.selectAll("path.link")
      	  .data(links, function(d) { return d.target.id; });

        link.enter().insert("path", "g")
      	  .attr("class", "link")
        	.style("stroke", function(d) { return d.target.level; })
      	  .attr("d", diagonal);
      }

    </script>
  </body>
</html>
